# ============================================================
# Konfiguracja linkera dla Picocomputer 6502
# System: 64kB RAM, brak ROM
# VIA: W65C22S @ $FFD0
# ============================================================

MEMORY {
    # Strona zerowa (bez pierwszych 16 bajtów systemowych)
    ZP:      start = $0010, size = $00F0, type = rw;
    
    # Stos sprzętowy
    STACK:   start = $0100, size = $0100, type = rw;
    
    # Główna pamięć RAM
    # Od $0200 do $FFCF (przed rejestrami VIA)
    RAM:     start = $0200, size = $FDD0, type = rw;
    
    # Rejestry VIA @ $FFD0-$FFDF (16 bajtów) - NIE UŻYWAĆ
    # VIA:   start = $FFD0, size = $0010, type = io;
    
    # Obszar wektorów - zapisywany programowo w RAM
    # $FFFA-$FFFF - wektory NMI, RESET, IRQ
    VECTORS: start = $FFE0, size = $0020, type = rw;
}

SEGMENTS {
    # Strona zerowa - zmienne szybkiego dostępu
    ZEROPAGE: load = ZP,  type = zp;
    
    # Kod startowy
    STARTUP:  load = RAM, type = rw;
    
    # Główny kod programu
    CODE:     load = RAM, type = rw;
    
    # Dane tylko do odczytu (w RAM, ale nie modyfikowane)
    RODATA:   load = RAM, type = rw;
    
    # Dane inicjalizowane
    DATA:     load = RAM, type = rw;
    
    # Dane nieinicjalizowane
    BSS:      load = RAM, type = bss, define = yes;
}

# Symbole pomocnicze
SYMBOLS {
    __STACKSTART__: type = weak, value = $01FF;
}
